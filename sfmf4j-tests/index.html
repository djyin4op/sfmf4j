<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Mar 5, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130305" />
    <meta http-equiv="Content-Language" content="en" />
    <title>SFMF4J :: Test Classes - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarEnabled">
          
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container"><div class="nav-collapse">
            
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="findbugs.html"  title="FindBugs Report">FindBugs Report</a>
</li>
                                  <li>      <a href="cobertura/index.html"  title="Cobertura Test Coverage">Cobertura Test Coverage</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
                                                              
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>SFMF4J :: Test Classes</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../index.html" title="SFMF4J: Simple File Monitor Facade For Java">
        SFMF4J: Simple File Monitor Facade For Java</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="index.html" title="SFMF4J :: Test Classes">
        SFMF4J :: Test Classes</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
        
                
                    
                 <li id="projectVersion" class="pull-right">Version: 1.0-SNAPSHOT</li>
      
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <div class="section"><h2>About SFMF4J :: Test Classes<a name="About_SFMF4J_::_Test_Classes"></a></h2><p>This project provides classes which are common to all tests for SFMF4J implementations. It exists to make developing and testing SFMF4J implementations as easy as possible. It is declared as a test-scoped dependency by the implementation modules, and is not intended for use by applications.</p></div><div class="section"><h2>Testing Implementations<a name="Testing_Implementations"></a></h2><p>Libraries which implement SFMF4J should declare this module as a <a href="./dependency-info.html">test-scoped dependency</a>.</p><div class="section"><h3>Non-OSGi<a name="Non-OSGi"></a></h3><p>Test classes for non-OSGi environments need only extend <a href="./apidocs/com/github/sworisbreathing/sfmf4j/test/AbstractNonOSGiTest.html">AbstractNonOSGiTest</a> and implement the following methods:</p><dl><dt>factoryInstance</dt><dd>provides the test harness with a fully-configured instance of your implementation's <tt>FileMonitorServiceFactory</tt>.</dd><dt>implementationClass</dt><dd>should return a reference to the class which implements <tt>FileMonitorService</tt>.</dd></dl></div><div class="section"><h3>OSGi<a name="OSGi"></a></h3><p>Test classes for OSGi environments should extend <a href="./apidocs/com/github/sworisbreathing/sfmf4j/osgi/test/AbstractOSGiTest.html">AbstractOSGiTest</a> and implement the following methods:</p><dl><dt>implementationOption</dt><dd>specifies the OSGi bundles the Pax Exam container will use during testing. At a bare minimum, this should include your implementation bundle and its dependencies.</dd><dt>configure</dt><dd>specifies additional settings to <tt>ConfigurationAdmin</tt> prior to obtaining your implementation's <tt>FileMonitorServiceFactory</tt> from the OSGi container. This is an optional step, as the default method is a no-op.</dd></dl><div class="section"><h4>Testing During The Build<a name="Testing_During_The_Build"></a></h4><p>Testing your OSGi bundle with Pax Exam as part of the build process can be a bit tricky. Your bundle won't be produced until the tests have passed, so how can you test against a non-existent OSGi bundle?</p><p>Fortunately, Pax Exam can be configured to load a folder hierarchy as if it were packaged into a single file. <tt>${project.build.outputDirectory}</tt> is perfect for this, but you'll also need to ensure there is an OSGi bundle manifest in this folder so that Pax Exam can load it. All you need to do is configure <a class="externalLink" href="http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html">maven-bundle-plugin</a> to generate the manifest before the tests are run:</p><div class="source"><pre class="prettyprint">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
      &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;
      &lt;!--
          ... (version, configuration, et cetera)
      --&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;bundle-manifest&lt;/id&gt;
          &lt;phase&gt;process-classes&lt;/phase&gt;
          &lt;goals&gt;
            &lt;goal&gt;manifest&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</pre></div><p>Then, you can reference the exploded bundle in your OSGi test:</p><div class="source"><pre class="prettyprint">import com.github.sworisbreathing.sfmf4j.osgi.test.AbstractOSGiTest;
import org.ops4j.pax.exam.CoreOptions;
import org.ops4j.pax.exam.Option;
import org.ops4j.pax.exam.util.PathUtils;

public class MyOSGiTest extends AbstractOSGiTest {

  @Override
  protected Option implementationOption() {
    return CoreOptions.bundle(&quot;reference:file:&quot; + PathUtils.getBaseDir() + &quot;/target/classes&quot;);
  }
}
</pre></div></div></div></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                    2013
                        <a href="https://github.com/sworisbreathing/">Steven Swor</a>.
            All Rights Reserved.      
                    
                  <li id="publishDate" class="pull-right">Last Published: 2013-03-05</li> 
            </div>

        
                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
  </body>
</html>
